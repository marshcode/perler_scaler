<html>

    <head>
        <title>Pokemon Pearler Scaler</title>

        <script>
            function draw(ev) {
                console.log(ev);
                var canvas = document.getElementById('canvas')

                var ctx = canvas.getContext('2d'),
                    img = new Image(),
                    f = document.getElementById("uploadimage").files[0],
                    url = window.URL || window.webkitURL,
                    src = url.createObjectURL(f);

                img.src = src;

                img.onload = function() {
                    var ratio = this.height / this.width;
                    canvas.height = this.height;
                    canvas.width = this.width;
                    // consider bringing this down for larger images
                    ctx.drawImage(img, 0, 0);
                    url.revokeObjectURL(src);
                }
                //canvas.height = canvas.width * ratio;  
            }

            window.onload = function() {
                document.getElementById("uploadimage").addEventListener("change", draw, false)
            };

        </script>
    </head>

    <body>

        <canvas id="canvas" width="500"></canvas>
        <input type='file' name='img' size='65' id='uploadimage' />

    </body>

</html>